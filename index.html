  <style>
	head{}
	body{
	padding: 20px;
	background: url(https://html5book.ru/wp-content/uploads/2016/12/background78.png);
	margin:0;

	
	
	}  
	  
	.block1{
	height: 500;
	width: 510;
	
	margin:10px;
	}
	  
   .layer {
	background-color: snow;
    overflow:scroll; /* Добавляем полосы прокрутки */
	overflow-x: 50%;
	overflow-y: 50%;
    width: 500; /* Ширина блока 68% */
    height: 500; /* Высота блока 93% */
	float: left;
    padding: 5px; /* Поля вокруг текста */
    border: solid 0.0px black;/* Параметры рамки */
	border-radius: 10px;
	box-shadow: 0px 8px 15px rgb(0 0 0 / 70%);
    } 
	  
	.knopki {
	width: 487px;
	height: 185px;
	float:left;
	padding: 10px;
	background-color: snow;
	border: solid 0.0px black;
	margin-top: 10px;
	border-radius: 10px;
	box-shadow: 0px 8px 15px rgb(0 0 0 / 50%);
	}
	
	.in{
	display: block;
	margin-left: 10px;
	  }
	  
	.stroka{width: 233;
	height: 25;
	font-family: 'Montserrat', sans-serif;
	font-weight: bold;
	font-size: 18px;
	  }
	  
	.stroka2{width: 302;
	height: 25;
	font-family: 'Montserrat', sans-serif;
	font-weight: bold;
	font-size: 18px;	
		}
	}
	.DA{height: 25px
	}
	
	.but {
	width: 55px;
	height: 25px;
	text-decoration: none;
    display: inline-block;
	border-radius: 8px;
	border: solid 0.0px snow;
	background: snow;
	font-family: 'Montserrat', sans-serif;
	font-weight: bold;
	font-size: 14px;
	letter-spacing: 0.5px;
	box-shadow: 0px 8px 15px rgb(0 0 0 / 50%);
	}
	
	.but:hover {
	background: #2EE59D;
  box-shadow: 0 15px 60px #2EE59D;
  color: snow;
  transform: translateY(-2px);	  
	  }
	 
	.but2 {
	width: 55px;
	height: 25px;
	text-decoration: none;
    display: inline-block;
	border-radius: 8px;
	border: solid 0.0px snow;
	background: snow;
	font-family: 'Montserrat', sans-serif;
	font-weight: bold;
	font-size: 14px;
	letter-spacing: 0.5px;
	box-shadow: 0px 8px 15px rgb(0 0 0 / 50%);
	}
	
	.but2:hover {
	background: red;
  box-shadow: 0 15px 60px red;
  color: snow;
  transform: translateY(-2px);	  
	  }
	  
	  .but3 {
	width: 113px;
	height: 25px;
	text-decoration: none;
    display: inline-block;
	border-radius: 8px;
	border: solid 0.0px snow;
	background: snow;
	font-family: 'Montserrat', sans-serif;
	font-weight: bold;
	font-size: 14px;
	letter-spacing: 0.5px;
	box-shadow: 0px 8px 15px rgb(0 0 0 / 50%);
	}
	
	.but3:hover {
	background: blue;
  box-shadow: 0 15px 60px blue;
  color: snow;
  transform: translateY(-2px);	  
	  }

	.script {
	float:left;
	margin: 10px;
	min-height: 706;
	width: 420;
	padding: 10px;
	background-color: snow;
	border: solid 0.0px black;	
	border-radius: 10px;
    float: right;
	box-shadow: 0px 8px 15px rgb(0 0 0 / 70%);
	}
	
	.cont {
		display: flex;	
		justify-content: center;
	}




	</style>
	<div class="cont">
<div class="block1">
<div class="layer" id="t">
<canvas   width=1100 height=1100></canvas><br>
</div>

<div class="knopki">
<div class="in">
<input class="stroka" id=txt type=text placeholder=" введите функцию " />
<button class="but"  onclick="cl4()"> ⌫  </button>
<button class="but" onclick="cl3()"> С </button>
<button class="but2" onclick="cl(),cl2()"> DEL </button>
<input class="but" type="color" id="col" name="body" value="#000000">
<pre id="outp"></pre>

<table width="10" border="0">
  <tbody>
	  <tr>
		  <td><input  class="but" type="button" value="asinh(" onClick="txt.value+='asinh('"> </td>
		  <td><input  class="but" type="button" value="asin(" onClick="txt.value+='asin('"> </td>
		  <td><input  class="but" type="button" value="(" onClick="txt.value+='('"> </td>
		  <td><input  class="but" type="button" value="sin(" onClick="txt.value+='sin('"></td>
		  <td><input class="but" type="button" value="cos(" onClick="txt.value+='cos('"></td>
		  <td><input class="but" type="button" value="tan(" onClick="txt.value+='tan('"></td>
		  <td><input class="but" type="button" value="π" onClick="txt.value+='pi'"></td>
		  <td><input class="but" type="button" value="-" onClick="txt.value+='-'"></td>
	</tr>	  
    <tr>
		<td><input  class="but" type="button" value="acosh(" onClick="txt.value+='acosh('"> </td>
		<td><input  class="but" type="button" value="acos()" onClick="txt.value+='acos('"> </td>
		<td><input  class="but" type="button" value=")" onClick="txt.value+=')'"> </td>
		<td><input class="but" type="button" value="abs(" onClick="txt.value+='abs('"></td>
      <td><input class="but" type="button" value="7" onClick="txt.value+='7'"></td>
      <td><input class="but" type="button" value="8" onClick="txt.value+='8'"></td>
      <td><input class="but" type="button" value="9" onClick="txt.value+='9'"></td>
	  <td><input class="but" type="button" value="*" onClick="txt.value+='*'"></td>
    </tr>
    <tr>
		<td><input  class="but" type="button" value="atanh(" onClick="txt.value+='atanh('"> </td>
		<td><input  class="but" type="button" value="atan(" onClick="txt.value+='atan('"> </td>
		<td><input  class="but" type="button" value="x^2" onClick="txt.value+='^(2)'"> </td>
		<td><input class="but" type="button" value="log(" onClick="txt.value+='log('"></td>
      <td><input class="but" type="button" value="4" onClick="txt.value+='4'"></td>
      <td><input class="but" type="button" value="5" onClick="txt.value+='5'"></td>
      <td><input class="but" type="button" value="6" onClick="txt.value+='6'"></td>
	  <td><input class="but" type="button" value="/" onClick="txt.value+='/'"></td>
    </tr>
    <tr>
		<td><input  class="but" type="button" value="cbrt(" onClick="txt.value+='cbrt('"> </td>
		<td><input  class="but" type="button" value="sinh(" onClick="txt.value+='sinh('"> </td>
		<td><input  class="but" type="button" value="x^3" onClick="txt.value+='^(3)'"> </td>
		<td><input class="but" type="button" value="exp(" onClick="txt.value+='exp('"></td>
      <td><input class="but" type="button" value="1" onClick="txt.value+='1'"></td>
      <td><input class="but" type="button" value="2" onClick="txt.value+='2'"></td>
      <td><input class="but" type="button" value="3" onClick="txt.value+='3'"></td>
	  <td><input class="but" type="button" value="+" onClick="txt.value+='+'"></td>
	</tr>	
	  <tr>
			<td><input  class="but" type="button" value="." onClick="txt.value+='.'"> </td>
			<td><input  class="but" type="button" value="cosh(" onClick="txt.value+='cosh('"> </td>
			<td><input  class="but" type="button" value="x^y" onClick="txt.value+='^('"> </td>
			<td><input class="but" type="button" value="√" onClick="txt.value+='sqrt('"></td>
      <td><input class="but" type="button" value="x" onClick="txt.value+='x'"></td>
      <td><input class="but" type="button" value="0" onClick="txt.value+='0'"></td>
      <td colspan="2"><input class="but3" type="button" value="=" onclick="draw(),AddItem();"></td>
	  </tr>
  </tbody>
</table>
</div>
</div>
</div>	
<div class="script">

<form name="form-bloggood-ru">
	 <div ID="items"> 
	 		 </div>
	 		 </form> 
	</div>
</div>




<script>
	
//добавление полей в ввода
	
var u=1;
		var items=0; 
		function AddItem()		{ 

div=document.getElementById("items");
			button=document.getElementById("add"); items++;
			newitem="<input type=\"text\" name=\"item\" id=\"q"+u+"\" value=\""+ document.getElementById("txt").value+"\"" + items; 
			newitem+="\" size=\"37\"> <input type=\"button\" name=\"item\" value=\"X\" onClick=\"rem("+u+"),re()\">  <input type=\"color\" id=\"r"+u+"\" name=\"item\" value=\""+ document.getElementById("col").value+"\">   <br>" ; 
			var newnode=document.createElement("d");
			newnode.id = u;
			newnode.innerHTML=newitem;
			div.insertBefore(newnode,button); 
			u=u+1;
}
	
	// удаление выбранного поля
	function rem(id) {
    var elem = document.getElementById(id);
    return elem.parentNode.removeChild(elem);
}


// данные графика
let scale = 20;
let step = 1;
let cnvs = document.querySelector('canvas');
let ctx = cnvs.getContext('2d');
document.getElementById('t').scrollTop += 300;
document.getElementById('t').scrollLeft += 300;

// первичный запуск отрисовки графика
cl();

//удаление добввленных полей
function cl2(){
document.getElementById("txt").value="";	
for(let r = 1; r<u; r+=1) {	
	
var eleme=document.getElementById("q"+r);
if(!eleme){} else {	rem(r)}	
}
}

//очистка текстового поля	
function cl3(){
document.getElementById("txt").value="";		
}

// одиночная очистка текстового поля
function cl4(){
document.getElementById("txt").value = document.getElementById("txt").value.substring(0, document.getElementById("txt").value.length - 1);
}
	
//отрисовка сетки графика	
function cl(){

const context = cnvs.getContext('2d'); context.clearRect(0, 0, cnvs.width, cnvs.height);

ctx.lineWidth = 0.1;
for (var i = step*scale; i < cnvs.width; i += step*scale) { //вертикальные
  polyline('#808080', [[i+10, 0], [i+10, cnvs.height]]);
}

for (var i = step*scale; i < cnvs.height; i += step*scale) { //Горизонтальные
  polyline('#808080', [[0, i+10], [cnvs.width, i+10]]);
}

ctx.lineWidth = 2;
//Ось X 
polyline('black', [[0, cnvs.height / 2], [cnvs.width, cnvs.height / 2]]);

// ось Y
polyline('black', [[cnvs.width / 2, 0], [cnvs.width / 2, cnvs.height]]);

// отрисока координат
ctx.strokeStyle = "black";
    ctx.lineWidth = 1;
    for (var i = 0; i < cnvs.width; i += 20) {
        ctx.font = '8px Segoe UI';
        labelX = i * 0.1/2;
		labelX = labelX.toFixed(0); //toFixed - char after comma
		if (i==0)
		{ctx.strokeText((labelX), cnvs.width / 2+5 , cnvs.height / 2+10 ); } 
		else
		{ctx.strokeText(("-"+labelX), cnvs.width / 2 +10 , cnvs.height / 2+i+5 );
        ctx.strokeText((labelX) ,  cnvs.width / 2+i-1  , cnvs.height / 2 +15 );
		 
		ctx.strokeText((labelX), cnvs.width / 2 +10 , cnvs.height / 2-i+5 );
        ctx.strokeText(("-"+labelX) ,  cnvs.width / 2-i-1  , cnvs.height / 2 +15 );
		}
    }	}


// отрисовка функции	
function draw(){
	
//замена	
 var str = document.getElementById("txt").value;
	
str = str.replace(/(sin|cos|tan|asin|acos|atan|pi|e|abs|exp|sqrt|sinh|cosh|asinh|acosh|atanh|cbrt)\(/g, "Math.$&");
str = str.replace(/(ln)\(/g, "Math.log(");
	
if (str.indexOf("^") > -1) {
        var tab = [];
        var powfunc="Math.pow";
        var joker = "___joker___";
        while (str.indexOf("(") > -1) {
            str = str.replace(/(\([^\(\)]*\))/g, function(m, t) {
                tab.push(t);
                return (joker + (tab.length - 1));
            });
        }

        tab.push(str);
        str = joker + (tab.length - 1);
        while (str.indexOf(joker) > -1) {
            str = str.replace(new RegExp(joker + "(\\d+)", "g"), function(m, d) {
                return tab[d].replace(/(\w*)\^(\w*)/g, powfunc+"($1,$2)");
            });
        }
    }
	
	
//обработка функции	
let y = x => eval(str);

ctx.lineWidth = 1;
let pts = [];
for(let x = -cnvs.width/2; x<cnvs.width/2; x+=0.01) {
    pts.push([cnvs.width/2+x, cnvs.height/2 - y(x/scale)*scale]);
}
polyline(document.getElementById("col").value, pts);
}

//функции отрисоки
function polyline(color, pts) {
  ctx.strokeStyle = color;
  ctx.beginPath();
  pts.forEach((p, i) => i ? ctx.lineTo(...p) : ctx.moveTo(...p));
  ctx.stroke();
}
	// отрисовка функций после удаления поля
	function re(){
	
cl();
// проверка на отрисоку функции
for(let r = 1; r<u; r+=1) {		
var eleme=document.getElementById("q"+r);
if(!eleme){} else {
var str = document.getElementById("q"+r).value;

//замена
       var str = document.getElementById("txt").value;
	
str = str.replace(/(sin|cos|tan|asin|acos|atan|pi|e|abs|exp|sqrt|sinh|cosh|asinh|acosh|atanh|cbrt)\(/g, "Math.$&");
str = str.replace(/(ln)\(/g, "Math.log(");
	
if (str.indexOf("^") > -1) {
        var tab = [];
        var powfunc="Math.pow";
        var joker = "___joker___";
        while (str.indexOf("(") > -1) {
            str = str.replace(/(\([^\(\)]*\))/g, function(m, t) {
                tab.push(t);
                return (joker + (tab.length - 1));
            });
        }

        tab.push(str);
        str = joker + (tab.length - 1);
        while (str.indexOf(joker) > -1) {
            str = str.replace(new RegExp(joker + "(\\d+)", "g"), function(m, d) {
                return tab[d].replace(/(\w*)\^(\w*)/g, powfunc+"($1,$2)");
            });
        }
    }

	
	
//обработка функции		
let y = x => eval(str);

ctx.lineWidth = 1;
let pts = [];
for(let x = -cnvs.width/2; x<cnvs.width/2; x+=0.01) {
    pts.push([cnvs.width/2+x, cnvs.height/2 - y(x/scale)*scale]);
}
polyline(document.getElementById("r"+r).value, pts); }}
}

</script>

